<!DOCTYPE html>
<html>
<head>
<!-- Load the Paper.js library -->
<script src="CCapture.all.min.js"></script>
<script src="https://unpkg.com/blob-util/dist/blob-util.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.1.1/gsap.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.2/paper-full.js"></script>
<!-- Define inlined PaperScript associate it with myCanvas -->
<!-- <script type="text/paperscript" canvas="myCanvas">
    paper.project.importSVG("image_source/heartbeat.svg", function(item) {
        tiger = item
        tiger.scale(1)
        tiger.position = new paper.Point(tiger.bounds.width/2, tiger.bounds.height/2)
      })

      paper.view.onFrame = (event) => {
        if(tiger) tiger.rotate(1)
      }
</script> -->

<style>
canvas{
  width:300vw;
  height:300vh;
}
</style>

<script>
    var animDuration = 500;
var waitOnLastFrame = 1000;
var startTime;


window.onload = function() {
  var canvas = document.getElementById('myCanvas')
  var scope = paper.setup(canvas)

  var tiger
  
  
  // method 2
  paper.project.importSVG("image_source/heartbeat.svg", function(item) {
    tiger = item
    tiger.scale(1.5)
    tiger.position = new paper.Point(tiger.bounds.width/2, tiger.bounds.height/2)
  })

//   var tl = new TimelineMax({repeat:-1, yoyo:true})
//      // size
//    .to(tiger.scale, 2, { width: 100, height: 50 }, 0)
  
  paper.view.onFrame = (event) => {
    if(tiger) tiger.rotate(1)
  }

  var capturer = new CCapture({
  format: "gif",
  workersPath: "./",
  framerate: 60,
  quality: 10,
  display: true
});

capturer.start();


function animate() {
  requestAnimationFrame(animate);

  capturer.capture(document.getElementById("myCanvas"));

  setTimeout(() => {
    capturer.stop();
    capturer.save();
  }, animDuration + waitOnLastFrame);
}

animate();
}
</script>
</head>
<body>
	<canvas id="myCanvas" resize></canvas>
</body>
</html>